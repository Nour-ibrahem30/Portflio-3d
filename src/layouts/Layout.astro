---
interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
  </head>
  <body class="bg-black text-white overflow-x-hidden">
    <canvas id="bg-canvas" class="fixed top-0 left-0 w-full h-full -z-10"></canvas>
    
    <nav class="fixed top-0 left-0 right-0 z-50 backdrop-blur-xl bg-black/30 border-b border-gray-800/50">
      <div class="container mx-auto px-6 py-4">
        <div class="flex justify-between items-center">
          <div class="text-2xl font-black bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">
            Nour Ibrahim
          </div>
          <div class="hidden md:flex gap-8">
            <a href="#home" class="hover:text-cyan-400 transition-colors font-medium">الرئيسية</a>
            <a href="#about" class="hover:text-cyan-400 transition-colors font-medium">عني</a>
            <a href="#projects" class="hover:text-cyan-400 transition-colors font-medium">المشاريع</a>
            <a href="#skills" class="hover:text-cyan-400 transition-colors font-medium">المهارات</a>
            <a href="#contact" class="hover:text-cyan-400 transition-colors font-medium">تواصل</a>
          </div>
          <button id="menu-btn" class="md:hidden text-3xl">☰</button>
        </div>
      </div>
    </nav>

    <div id="mobile-menu" class="fixed inset-0 bg-black/95 backdrop-blur-xl z-40 hidden flex items-center justify-center">
      <div class="flex flex-col items-center gap-8 text-2xl">
        <a href="#home" class="mobile-link hover:text-cyan-400 transition-colors">الرئيسية</a>
        <a href="#about" class="mobile-link hover:text-cyan-400 transition-colors">عني</a>
        <a href="#projects" class="mobile-link hover:text-cyan-400 transition-colors">المشاريع</a>
        <a href="#skills" class="mobile-link hover:text-cyan-400 transition-colors">المهارات</a>
        <a href="#contact" class="mobile-link hover:text-cyan-400 transition-colors">تواصل</a>
      </div>
    </div>

    <main>
      <slot />
    </main>

    <footer class="py-8 text-center border-t border-gray-800/50 bg-black/50 backdrop-blur-xl">
      <p class="text-gray-500">© 2024 Nour Ibrahim - جميع الحقوق محفوظة</p>
    </footer>

    <script>
      const menuBtn = document.getElementById('menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileLinks = document.querySelectorAll('.mobile-link');

      menuBtn?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('hidden');
      });

      mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
          mobileMenu?.classList.add('hidden');
        });
      });

      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          target?.scrollIntoView({ behavior: 'smooth' });
        });
      });
    </script>

    <script>
      import * as THREE from 'three';

      const canvas = document.getElementById('bg-canvas');
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
      
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      camera.position.z = 5;

      const geometry = new THREE.BufferGeometry();
      const vertices = [];
      for (let i = 0; i < 5000; i++) {
        vertices.push(
          (Math.random() - 0.5) * 100,
          (Math.random() - 0.5) * 100,
          (Math.random() - 0.5) * 100
        );
      }
      geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

      const material = new THREE.PointsMaterial({
        size: 0.05,
        color: 0x00ffff,
        transparent: true,
        opacity: 0.8
      });

      const particles = new THREE.Points(geometry, material);
      scene.add(particles);

      let mouseX = 0, mouseY = 0;
      document.addEventListener('mousemove', (e) => {
        mouseX = (e.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
      });

      function animate() {
        requestAnimationFrame(animate);
        particles.rotation.y += 0.001;
        particles.rotation.x += 0.0005;
        camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.05;
        camera.position.y += (mouseY * 0.5 - camera.position.y) * 0.05;
        renderer.render(scene, camera);
      }
      animate();

      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    </script>
  </body>
</html>
